{{- /* Print HTML Template - Optimized for PDF generation */ -}}
<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }} - {{ .Site.Title }}</title>
    <style>
        /* Print-optimized styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.6;
            color: #000;
            background: #fff;
            max-width: 9.5in;
            margin: 0 auto;
            padding: 1in;
        }
        
        h1 {
            font-size: 24pt;
            margin-bottom: 0.5em;
            page-break-after: avoid;
        }
        
        h2 {
            font-size: 18pt;
            margin-top: 1.5em;
            margin-bottom: 0.5em;
            page-break-after: avoid;
        }
        
        h3 {
            font-size: 14pt;
            margin-top: 1em;
            margin-bottom: 0.5em;
            page-break-after: avoid;
        }
        
        p {
            margin-bottom: 1em;
            text-align: justify;
        }
        
        .post-meta {
            font-size: 10pt;
            color: #666;
            margin-bottom: 2em;
            padding-bottom: 1em;
            border-bottom: 1px solid #ccc;
        }
        
        .post-meta span {
            margin-right: 1em;
        }
        
        code {
            font-family: 'Courier New', monospace;
            font-size: 10pt;
            background: #f5f5f5;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        pre {
            background: #f5f5f5;
            padding: 1em;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 1em;
            page-break-inside: avoid;
        }
        
        pre code {
            background: none;
            padding: 0;
        }
        
        blockquote {
            border-left: 4px solid #ccc;
            padding-left: 1em;
            margin: 1em 0;
            font-style: italic;
            color: #555;
        }
        
        ul, ol {
            margin-left: 2em;
            margin-bottom: 1em;
        }
        
        li {
            margin-bottom: 0.5em;
        }
        
        .image-placeholder {
            display: block;
            padding: 1em;
            margin: 1em 0;
            background: #f9f9f9;
            border: 1px dashed #ccc;
            font-style: italic;
            color: #666;
            text-align: center;
        }
        
        @media print {
            body {
                margin: 0;
                padding: 1in;
            }
            
            h1, h2, h3 {
                page-break-after: avoid;
            }
            
            pre, blockquote {
                page-break-inside: avoid;
            }
            
            a {
                color: #000;
                text-decoration: underline;
            }
            
            a[href]:after {
                content: " (" attr(href) ")";
                font-size: 9pt;
                color: #666;
            }
            @page {
                margin: 1in;
                @top-center { content: "Tech Index"; }
                @bottom-center { content: counter(page); }
             }
}

@media (max-width:730px) {
    body {
        padding: 0.3in;
    }
}

@media (max-width:430px) {
    body {
        h1 {
            font-size: 20pt;
        }
    }
}

@media (max-width:365px) {
    body {
        h1 { 
            font-size: 18pt;
        }
}}

    </style>
</head>
<body>
    <article>
        <header>
            <h1>{{ .Title }}</h1>
            <div class="post-meta">
                {{- if .Params.author }}<span><strong>Author:</strong> {{ .Params.author }}</span>{{ end -}}
                {{- if .Date }}<span><strong>Date:</strong> {{ .Date.Format "January 2, 2006" }}</span>{{ end -}}
            </div>
            {{- if .Description }}
            <p><em>{{ .Description }}</em></p>
            {{- end }}
        </header>
        
        <div class="post-content">
            {{- /* Replace images with alt text placeholders */ -}}
            {{- $content := .Content -}}
            
            {{- /* Replace Hugo shortcode images */ -}}
            {{- $content = replaceRE `\{\{<\s*img\s+src="[^"]+"\s+alt="([^"]+)"[^>]*>\}\}` `<div class="image-placeholder">[Image: $1]</div>` $content -}}
            
            {{- /* Replace standard markdown/HTML images */ -}}
            {{- $content = replaceRE `<img[^>]+alt="([^"]*)"[^>]*>` `<div class="image-placeholder">[Image: $1]</div>` $content -}}
            {{- $content = replaceRE `!\[([^\]]*)\]\([^\)]+\)` `<div class="image-placeholder">[Image: $1]</div>` $content -}}
            
            {{- $content | safeHTML -}}
        </div>
        
        {{- if .Params.reviewed_by }}
        <hr style="margin-top: 2em;">
        <div style="margin-top: 1em;">
            <strong>Reviewed by:</strong> 
            {{- if .Params.reviewer_link -}}
            <a href="{{ .Params.reviewer_link }}">{{ .Params.reviewed_by }}</a>
            {{- else -}}
            {{ .Params.reviewed_by }}
            {{- end -}}
        </div>
        {{- end }}
    </article>
</body>
</html>